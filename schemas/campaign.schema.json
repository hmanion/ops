{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Campaign",
  "type": "array",
  "items": {
    "type": "object",
    "required": [
      "id", "client", "lane", "owner", "sectionStartDate", "gates", "touchpoints", "tokens", "flags", "reviewClass"
    ],
    "properties": {
      "id": { "type": "string", "minLength": 1 },
      "client": { "type": "string", "minLength": 1 },
      "lane": { "enum": ["content", "activation"] },
      "owner": { "type": "string", "minLength": 1 },
      "sectionStartDate": { "type": "string", "format": "date" },
      "sectionDay": { "type": "integer", "minimum": 1, "maximum": 90 },
      "forecastDay": { "type": "integer", "minimum": 1, "maximum": 90 },
      "publishByDate": { "type": "string", "format": "date" },
      "promotionDaysRemaining": { "type": "integer", "minimum": 0 },
      "bufferBurnPercent": { "type": "number", "minimum": 0, "maximum": 100 },
      "blockedOverdueBusinessDays": { "type": "integer", "minimum": 0 },
      "externalDependencyBlocked": { "type": "boolean" },
      "qualityRiskFlag": { "type": "boolean" },
      "reviewClass": { "enum": ["A", "B", "C"] },
      "slaDeadline": { "type": "string", "format": "date-time" },
      "gates": {
        "type": "object",
        "required": ["gateA", "gateB", "gateC", "gateD"],
        "properties": {
          "gateA": { "enum": ["pending", "met", "missed"] },
          "gateB": { "enum": ["pending", "met", "missed"] },
          "gateC": { "enum": ["pending", "met", "missed"] },
          "gateD": { "enum": ["pending", "met", "missed"] }
        }
      },
      "touchpoints": {
        "type": "object",
        "required": ["planningCallDate", "interviewDate", "reviewRequestedAt", "reviewApprovedAt", "backupContact", "eventConflict"],
        "properties": {
          "planningCallDate": { "type": ["string", "null"], "format": "date" },
          "interviewDate": { "type": ["string", "null"], "format": "date" },
          "reviewRequestedAt": { "type": ["string", "null"], "format": "date-time" },
          "reviewApprovedAt": { "type": ["string", "null"], "format": "date-time" },
          "backupContact": { "type": "string" },
          "eventConflict": { "type": "boolean" }
        }
      },
      "tokens": {
        "type": "object",
        "required": ["internalProduction", "review", "clientTouchpoint"],
        "properties": {
          "internalProduction": { "type": "boolean" },
          "review": { "type": "boolean" },
          "clientTouchpoint": { "type": "boolean" }
        }
      },
      "flags": {
        "type": "object",
        "required": ["legalCompliance", "churnThreat", "reputational"],
        "properties": {
          "legalCompliance": { "type": "boolean" },
          "churnThreat": { "type": "boolean" },
          "reputational": { "type": "boolean" }
        }
      }
    }
  }
}
